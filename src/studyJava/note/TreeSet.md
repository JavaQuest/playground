# RED-BLACK TREE

이진 탐색 트리(BST)의 한 종류  
스스로 균형(balancing) 잡는 트리  
BST의 worst case의 단점을 개선 => 노드가 한 쪽으로 쏠려 O(N)  
 
## RED-BLACK TREE 속성
1. 모든 노드는 red or black  
2. 루트 노드는 black  
3. 모든 nil(leaf) 노드는 black  
4. red의 자녀들은 black
5. 임의의 노드에서 자손 nil 노드들까지 가는 경로들의 black 수는 같다 (자기 자신은 카운트 X)

## RB 트리가 균형 잡는 법
삽입/삭제 시 주로 속성 4번, 5번을 위반
이를 해결하려고 구조를 바꾸다보면 자연스럽게 트리의 균형이 잡힘

## nil 노드란?
존재하지 않음을 의미하는 노드  
자녀가 없을 때 자녀를 nil 노드로 표기  
값이 있는 노드와 동등하게 취급  
RB 트리에서 leaf 노드는 nil 노드  

## 노드 x의 black height
노드 x에서 임의의 자손 nil 노드까지 내려가는 경로에서의 black의 수  
자기 자신은 카운트 X  
#5 속성을 만족해야 성립하는 개념  

## 색을 바꾸면서도 #5 속성 유지하기
RB 트리가 #5 속성을 만족하고 있고 두 자녀가 같은 색을 가질 때,  
부모와 두 자녀의 색을 바꿔줘도 #5 속성은 여전히 만족

# 삽입
삽입하는 노드는 항상 red => 삽입 후에도 #5 속성을 만족하기 위해

삽입 방식은 일반적인 BST와 동일  
삽입 후 RB 트리 위반 여부 확인

삽입 후 RB 트리 속성을 위반한 경우  
트리의 재조정을 위해 회전, 색 바꾸기를 사용하여 모든 속성을 만족시킴  

# 삭제
삭제 방식은 일반적인 BST와 동일  
삭제 후 RB 트리 속성 위반 여부 확인  
RB 트리 속성을 위반했다면 재조정  

삭제되는 노드가 레드면 RB 트리 속성을 만족하여 상관없지만 삭제되는 노드가 블랙이라면 5번 속성을 위반  
-> 삭제된 색의 위치에 extra black을 부여, 트리의 재조정을 위해 회전, 색 바꾸기를 사용하여 모든 속성을 만족시킴